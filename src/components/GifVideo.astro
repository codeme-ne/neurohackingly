---
interface Props {
  webm?: string;
  mp4?: string;
  poster?: string;
  alt?: string;
  class?: string;
}

const { webm, mp4, poster, alt = '', class: className }: Props = Astro.props;
const hasAnySource = Boolean(webm || mp4);
---

{hasAnySource ? (
  <figure class={`gif-video ${className ?? ''}`.trim()}>
    <video
      autoplay
      loop
      muted
      playsinline
      poster={poster}
      aria-label={alt || undefined}
    >
      {webm && <source src={webm} type="video/webm" />}
      {mp4 && <source src={mp4} type="video/mp4" />}
    </video>
    {alt && <figcaption>{alt}</figcaption>}
  </figure>
) : null}

<style>
  .gif-video {
    margin: 2rem 0;
  }

  .gif-video video {
    display: block;
    width: 100%;
    border-radius: 0.5rem;
    box-shadow: 0 4px 20px var(--color-overlay, rgba(0, 0, 0, 0.1));
  }

  .gif-video figcaption {
    margin-top: 0.5rem;
    font-size: 0.9rem;
    color: var(--color-text-light);
    text-align: center;
  }
</style>
