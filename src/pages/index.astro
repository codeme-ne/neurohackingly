---
import SEO from "../components/SEO.astro";
import ScrollProgress from "../components/ScrollProgress.astro";
import MinimalNav from "../components/MinimalNav.astro";
import Footer from "../components/Footer.astro";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import PostListTable from "../components/PostListTable.astro";
import NewsletterSignup from "../components/NewsletterSignup.astro";
import "../styles/global.css";
import ThemeScript from "../components/ThemeScript.astro";
import heroPhoto from "../assets/heroes/home/Lukas_Zangerl_Neurohackingly.jpeg";

// Fetch all non-draft posts, sorted by date descending
const allPosts = await getCollection("blog", ({ data }) => !data.draft);
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<!doctype html>
<html lang="en">
  <head>
    <SEO
      title="Neurohackingly - Productivity, AI & Neuroscience"
      description="Practical strategies and insights on productivity, AI, and personal growth by Lukas Zangerl"
      category="home"
    />
    <ThemeScript />
  </head>
  <body>
    <ScrollProgress />
    <MinimalNav />

    <main>
      <header class="hero">
        <div class="hero-grid">
          <div class="hero-content">
            <span class="tagline">Upgrade your brain, mind, and body</span>
            <h1>Neurohackingly</h1>
            <p class="subtitle">
              Practical strategies for productivity, AI, and personal growth
            </p>
            <div class="hero-cta">
              <NewsletterSignup
                source="home-hero"
                id="hero-email"
                ariaLabel="Join the newsletter"
              />
            </div>
          </div>
          <div class="hero-visual">
            <div class="hero-image-wrapper">
              <Image
                src={heroPhoto}
                alt="Lukas Zangerl"
                class="hero-image"
                width={400}
                height={400}
                loading="eager"
              />
            </div>
          </div>
        </div>
      </header>

      <section class="posts-section">
        <PostListTable posts={sortedPosts} showMoreButton={true} />
      </section>
    </main>

    <Footer />
  </body>
</html>

<style>
  .posts-section {
    margin-top: var(--space-xl);
    margin-bottom: var(--space-2xl);
  }
</style>
