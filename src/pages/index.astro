---
import SEO from "../components/SEO.astro";
import ScrollProgress from "../components/ScrollProgress.astro";
import MinimalNav from "../components/MinimalNav.astro";
import Footer from "../components/Footer.astro";
import { getCollection } from "astro:content";
import PostListTable from "../components/PostListTable.astro";
import NewsletterSignup from "../components/NewsletterSignup.astro";
import "../styles/global.css";
import ThemeScript from "../components/ThemeScript.astro";

// Fetch all non-draft posts, sorted by date descending
const allPosts = await getCollection("blog", ({ data }) => !data.draft);
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<!doctype html>
<html lang="en">
  <head>
    <SEO
      title="Neurohackingly - Productivity, AI & Neuroscience"
      description="Practical strategies and insights on productivity, AI, and personal growth by Lukas Zangerl"
      category="home"
    />
    <ThemeScript />
  </head>
  <body>
    <ScrollProgress />
    <MinimalNav />

    <main>
      <header class="hero">
        <div class="hero-inner">
          <h1>Neurohackingly</h1>
          <p class="tagline">Upgrade your brain, mind, and body</p>
          <p class="subtitle">
            Practical strategies for productivity, AI, and personal growth
          </p>

          <NewsletterSignup
            source="home-hero"
            id="hero-email"
            ariaLabel="Join the newsletter"
          />
        </div>
      </header>

      <section class="posts-section">
        <PostListTable posts={sortedPosts} />
      </section>
    </main>

    <Footer />
  </body>
</html>

<style>
  .hero-inner {
    max-width: 720px;
    margin: 0 auto;
  }

  .posts-section {
    margin-top: var(--space-xl);
    margin-bottom: var(--space-2xl);
  }

  @media (max-width: 640px) {
    .hero-inner {
      padding-inline: 1rem;
    }
  }
</style>
