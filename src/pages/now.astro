---
import { getEntry, getCollection } from "astro:content";
import BlogPost from "../layouts/BlogPost.astro";

const entry = await getEntry("blog", "now");
let Content, headings;
if (entry) {
  const rendered = await entry.render();
  Content = rendered.Content;
  headings = rendered.headings;
}
---

{
  entry && Content ? (
    <BlogPost
      {...entry.data}
      headings={headings}
      allPosts={await getCollection("blog", ({ data }) => !data.draft)}
      slug={entry.slug}
    >
      <Content />
    </BlogPost>
  ) : (
    <div>
      <h1>Debug: Entry not found</h1>
      <p>Could not find blog entry with slug "now"</p>
    </div>
  )
}
